<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>File Upload</title>
	<link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css}" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

<div class="container mt-5">
	<h2 class="text-center" th:if="${message}" th:text="${message}"></h2>
	<h2 class="text-center" style="color: darkred;" th:if="${errorMessage}" th:text="${errorMessage}"></h2>

	<form method="POST" enctype="multipart/form-data" action="/" class="mb-4">
		<label for="fileUpload" class="form-label">File to upload:</label>
		<input type="file" class="form-control" id="fileUpload" name="file" />
		<button type="submit" class="btn btn-primary mt-2">Upload</button>
	</form>

	<h3>Uploaded Files</h3>
	<div class="row row-cols-2 row-cols-md-3 g-3">
		<div th:each="file : ${files}" class="col">
			<div class="card">
				<a th:href="${file}">
					<img th:src="${file}" class="card-img-top" alt="Image preview" style="max-height: 100px; object-fit: cover;" />
				</a>
				<div class="card-body text-center">
					<a th:href="${file}" th:text="${file}" class="stretched-link"></a>
				</div>
			</div>
		</div>
	</div>
</div>

<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js}" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
